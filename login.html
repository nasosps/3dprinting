<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-900 h-screen flex items-center justify-center text-white">
    <div class="bg-gray-800 p-8 rounded-xl shadow-lg w-80 text-center">
        <h2 class="text-2xl font-bold mb-6 text-green-500">P3D Login</h2>
        <input type="email" id="email" placeholder="Email" class="w-full p-3 mb-3 rounded bg-gray-700 border border-gray-600 outline-none focus:border-green-500">
        <input type="password" id="pass" placeholder="Password" class="w-full p-3 mb-4 rounded bg-gray-700 border border-gray-600 outline-none focus:border-green-500">
        <button onclick="doLogin()" class="w-full bg-green-600 p-3 rounded font-bold hover:bg-green-500 transition">ΕΙΣΟΔΟΣ</button>
        <p id="error" class="text-red-500 text-sm mt-3"></p>
    </div>

    <script src="common.js"></script>
    <script>
        async function doLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('pass').value;
            const errEl = document.getElementById('error');
            
            errEl.innerText = "Checking...";

            const { data, error } = await sb.auth.signInWithPassword({
                email: email,
                password: password,
            });

            if (error) {
                errEl.innerText = "Λάθος στοιχεία ή πρόβλημα σύνδεσης.";
                console.error(error);
            } else {
                window.location.href = "index.html";
            }
        }
    </script>
</body>
</html>